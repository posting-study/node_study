# http 모듈로 서버 만들기

- node는 서버가 아니다 -> js 실행기일 뿐, 서버 실행 코드를 작동시켜줄 뿐.
- 서버와 클라이언트는 요청과 응답을 http 프로토콜(규약)에 맞게 주고받음
- 코드가 바뀌면 서버는 재시작 되어야 함 (지켜보고 있다가 특정 조건에 재시작하게끔 실행코드를 짜둘 수는 있다)

1. http 요청에 응답하는 노드 서버
    - `createServer` 로 요청 이벤트에 대기
    - 콜백함수로 객체로 정보를 받음 ->`req`: 요청에 관한 정보,  `res`: 응답에 관한 정보 
    - res 객체의 메서드
        - `res.writeHead`: (Network Response Headers)응답에 대한 정보를 기록-> (첫번째 인수)http 상태코드, (두번째 인수)응답에 대한 정보로 이루어짐
        - `res.write`: 클라이언트로 보낼 데이터, 문자열/버퍼 등을 보낼 수 있음
        - `res.end`: 응답을 종료하는 메서드, 인수가 있다면 클라이언트로 보내고 응답을 종료함 -> `return`을 붙여야 함수가 종료됨

2. `fs`로 HTML 읽어 제공하기
    - `fs.readFile`로 파일 읽기
    - `async` 이용해서 `try-catch`문으로 에러 처리하기
    
3. REST API 서버 만들기
    - 서버에 요청을 보낼 때는 주소를 통해 요청의 내용을 표현. 
    REST에서는 주소 외에도 HTTP 요청 메서드라는 것을 사용 (GET, POST, PATCH...)
    - REST: REpresentational State Transfer -> 서버의 자원을 정의하고 자원에 대한 주소를 지정하는 방법
    - 주소 하나가 요청 메서드를 여러 개 가질 수 있음
    
-------
[코드]()

- require로 http 모듈을 불러옴
- http 모듈의 `createServer` 함수로 서버 생성
- `.listen` 함수는 서버를 시작하게 하고, 클라이언트의 요청에 대기함 (8082 포트에서 대기중)
- createServer 함수에 비동기 함수 넘김. try-catch 문 사용
    - `GET(가져옴)`
        - 웹 브라우저 주소창에 URL을 입력하는 경우
        - 링크를 클릭하는 경우
        - 입력폼의 메소드 속성값이 get인 경우
    - `POST(게시)`, `PUT(집어넣음)` : 코드의 흐름을 기억할 것
        - `body`를 만든 후, 요청을 stream 형식으로 받음(코드 확인하기)
        - `req.on('data')`, `req.on('end')` 사용 -> 데이터를 꺼내기 위한 작업

    (POST의 GET의 문제점 해결)
        - URL에 데이터가 포함되지 않아 외부에 노출되지 않음
        - 바이너리, 대용량 데이터 전송 가능

    - `PATCH(부분 수정)`
    - `DELETE(삭제)`
--------
요청과 응답은 모두 헤더와 본문을 가짐. 헤더는 요청/응답에 대한 정보를 가지고, 본문은 서버와 클라이언트 간에 주고받을 실제 데이터를 담아둠

-> 개발자 도구 Network 탭에서 확인 가능

- `General`: 공통된 헤더
- `Request Headers`: 요청의 헤더
- `Response Headers`: 응답의 헤더 
- `Request Payload`: 요청의 본문
- `Preview`나 `Response` 탭: 응답의 본문

4. 쿠키

5. 세션

6. https, http2

7. cluster



----
# 포트 

- localhost : 현재 사용하는 컴퓨터의 내부 주소
- 포트 : 서버 내 프로세스를 구분하는 번호 -> 서버는 프로세스에 포트를 다르게 할당해 들어오는 요청을 구분함
    - 유명한 포트 번호: 21(FTP), 80(HTTP), 443(HTTPS), 3306(MYSQL)
- 80번 포트를 사용하면 주소에서 포트를 생략할 수 있음 -> 배포시 사용
- 이론상으로 한번에 여러개의 포트를 열어, 여러개의 서버를 실행할 수 있음
