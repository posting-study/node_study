# 몽고디비 

MySQL 같은 SQL 데이터베이스와는 다른 유형인 NoSQL 데이터베이스인 mongoDB를 알아보도록 하자. 

몽고디비의 JS 문법을 사용하기에, 노드와 같이 하나의 언어만 사용하면 되기 때문에 생산성이 높다.

몽고디비는 흔히 사용하는 RDBMS가 아니라 특색이 뚜렷한 NoSQL이기에 특징을 알고 잘 사용해야 한다.

**[SQL과 NoSQL 특징 비교]**

|SQL|NoSQL|
|---|-----|
| 규칙에 맞는 데이터 입력 | 자유로운 데이터 입력|
| 테이블 간 JOIN 지원 | 컬렉션 간 JOIN 미지원 |
| 안정성, 일관성 | 확장성, 가용성|
| 용어(테이블,로우,컬럼) | 용어(컬렉션, 다큐먼트, 필드) |

=> NoSQL에는 고정된 테이블이 없고 테이블에 상응하는 `컬렉션`이라는 개념이 있다. 컬럼을 따로 정의하지 않고, 해당 컬렉션에 어떠한 데이터든 들어갈 수 있다.

=> 몽고디비에는 JOIN의 기능이 없고 `aggregate` 로 흉내 가능하다. 하나의 쿼리로 여러 테이블을 합치는 작업이 항상 가능하지는 않아 동시에 쿼리를 수행하는 경우에 쿼리가 섞여 예상치 못한 결과를 낼 수 있다는 것이 단점이다. 이러한 단점에도 몽고디비의 확장성과 가용성 때문에, 데이터를 빠르게 넣고 쉽게 여러 서버에 데이터를 분산할 수 있다.

=> 애플리케이션을 만들때 SQL과 NoSQL을 동시에 사용할 수 있고, 각각의 특징에 맞게 빅데이터, 메시징, 세션 관리와 같은 비정형 데이터에는 몽고디비를 사용하는 것이 좋다.

## 몽고디비 설치하기

homebrew를 통해 몽고디비를 설치하고 실행해보자
```BASH
$ brew tap mongodb/brew

$ brew install mongodb-community

$ brew services start mongodb-community
```

## 데이터베이스 및 컬렉션 생성하기

- 데이터베이스 생성 : `use [데이터베이스명]`
```
> use nodejs
switched to db nodejs
```
- 데이터베이스 목록 확인: `show dbs`
- 사용중인 데이터베이스 확인: `db`
- 다큐먼트를 넣는 순간 컬렉션도 자동으로 생성되지만, 컬렉션을 생성하는 명령어가 있음: `db.createCollection('컬렉션이름')
```
> db.createCollection('users')
{ "ok" : 1 }
> db.createCollection('comments')
{ "ok" : 1 }

> show collections
comments
users
```

## CRUD 작업하기

컬렉션에 컬럼을 정의하지 않아도 되기에 컬렉션에는 아무 데이터나 넣을 수 있다. 이런 자유로움이 몽고디비의 장점이면서, 무엇이 들어올지 모르는 단점도 있다. 몽고디비는 js 문법을 사용해서, MySQL과 조금 다른 js 자료형을 따르는데