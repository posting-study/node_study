# 몽구스

MySQL에 시퀄라이즈가 있다면, 몽고디비에는 몽구스가 있다.

몽구스는 몽고디비 작업을 쉽게 할 수 있도록 도와주는 라이브러리고 시퀄라이즈와 다르게 ODM(Object Document Mapping)이라고 불린다. 몽고디비는 relation이 아니라 document를 이용하기에 ODM(객체와 다큐먼트를 매핑)이라고 불리는 것이다.

몽고디비 자체가 js 문법으로 이루어져 있는데, 또 객체와 매핑하는 이유는 몽고디비에 없어 불편한 기능들을 다음과 같이 몽구스가 보완하기 때문이다.

- `스키마`가 존재한다.  몽고디비는 테이블이 없어서 자유롭게 데이터를 넣을 수 있지만, 잘못된 자료형의 데이터를 넣을 수도 있고, 다른 다큐먼트에는 없는 필드의 데이터를 넣을 수도 있다. 몽구스는 몽고디비에 데이터를 넣기 전에 노드 서버 단에서 데이터를 한 번 필터링하는 역할을 한다.
- `populate`라는 메서드로 MySQL JOIN 기능을 보완한다. 관계가 있는 데이터를 쉽게 가져올 수 있다.
- ES2015 프로미스 문법과 강력하고 가독성이 높은 쿼리 빌더를 지원한다.

## 몽고디비 연결하기

1. 몽고디비는 주소를 사용해 연결한다. 

- 주소 형식: `mongodb://[username:password@]host[:port][/[database][?options]]`

    username과 password에 몽고디비 계정 이름과 비밀번호를 넣고, host가 localhost, port가 27017, 계정이 있는 database가 admin이므로 주소는 mongodb://이름:비밀번호@localhost:27017/admin이 된다.

- schemas 폴더를 루트 디렉토리에 생성하고 폴더 안에 index.js 파일에 몽고디비를 주소로 연결한다.

2. app.js를 만들고 schemas/index.js와 연결한다.

3. 스키마 정의

- 시퀄라이즈에서 테이블을 만들었던 것처럼 schemas 폴더 안에 몽구스 스키마를 만든다. (예시로 써온 user, comment 스키마를 만든다)

- MySQL의 테이블처럼 정해진 데이터만 들어갈 수 있게 강제한다

- type: 자료형, require: 필수 여부, default: 기본값, unique: 고유 여부

